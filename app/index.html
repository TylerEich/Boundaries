<!doctype html>
<html ng-app="bndry">
  <head>
    <meta charset="utf-8">
    <title>Boundaries</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- iPhone (Retina) -->
    <link href="apple-touch-startup-image/iphone3_5.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPhone 5 -->
    <link href="apple-touch-startup-image/iphone4.png"  media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPad Portrait -->
    <link href="apple-touch-startup-image/ipad_lowres.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <!-- iPad Landscape -->
    <link href="apple-touch-startup-image/ipad_lowres_landscape.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
    <!-- iPad Portrait (Retina) -->
    <link href="apple-touch-startup-image/ipad.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- iPad Landscape (Retina) -->
    <link href="apple-touch-startup-image/ipad_landscape.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        
    <!-- inject:critical:css -->
    <!-- endinject -->
  </head>
  <body ng-controller="MasterCtrl">
    <svg id="spritesheet" style="display: none;">
      <symbol id="flex-nofill" viewBox="0 0 64 64">
        <path d="m12,12c0,0 48,0 20,20c-20,20 20,20 20,20" fill="none" stroke-opacity="0.5" />
        <circle r="4" cx="12" cy="12" />
        <circle r="4" cx="52" cy="52" />
      </symbol>
      <symbol id="rigid-nofill" viewBox="0 0 64 64">
        <line x1="12" y1="12" x2="52" y2="52" stroke-opacity="0.5"/>
        <circle r="4" cx="12" cy="12" />
        <circle r="4" cx="52" cy="52" />
      </symbol>
      <symbol id="flex-fill" viewBox="0 0 64 64">
        <path d="M 52,50 C 47.000001,59 42,50 32.000001,50 22.000001,50 17,59 12,50 6.9999998,41 17,41 22,32 27,23 22,14 32,14 42,14 37,23 42,31.999999 47,41 57,41 52,50 z" stroke="none" fill-opacity="0.5" />
        <circle r="4" cx="32" cy="14" />
        <circle r="4" cx="52" cy="50" />
        <circle r="4" cx="12" cy="50" />
      </symbol>
      <symbol id="rigid-fill" viewBox="0 0 64 64">
        <polygon points="32,14 52,50 12,50" stroke="none" fill-opacity="0.5" />
        <circle r="4" cx="32" cy="14" />
        <circle r="4" cx="52" cy="50" />
        <circle r="4" cx="12" cy="50" />
      </symbol>
    </svg>
    <div id="splash" ng-cloak>
      <svg id="logo" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 320 64">
        <path d="M 23.999999,0 C 10.747999,0 0,10.748 0,24 0,37.252001 23.999999,64 23.999999,64 23.999999,64 48,37.252001 48,24 48,10.748 37.252,0 23.999999,0 z m 0,40 C 15.164,40 8.0000012,32.836001 8.0000012,24 8.0000012,15.164001 15.164,8 23.999999,8 32.836001,8 40,15.164001 40,24 40,32.836001 32.836001,40 23.999999,40 z" />
        <text x="59.998112" y="50.034107" style="font-size:51.3061409px;">Boundaries</text>
      </svg>
      <svg id="throbber" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 64 64" enable-background="new 0 0 64 64">
        <g>
          <circle cx="32" cy="51.5" r="4.5" />
          <circle cx="48.868" cy="41.75" r="4.5" />
          <circle cx="48.868" cy="22.25" r="4.5" />
          <circle cx="32" cy="12.5" r="4.5" />
          <circle cx="15.132" cy="22.25" r="4.5" />
          <circle cx="15.133" cy="41.75" r="4.5" />
        </g>
      </svg>
    </div>
    <header no-scroll ng-cloak>
      <div ui-view="header" ng-controller="ShapeCtrl" class="slide" ng-class="{left: top && bottom, right: !top && !bottom}">
        <nav>
          <!-- <button ng-click="setShowHeader('search')" ng-class="{ active: show.header === 'search' }">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 64 64" enable-background="new 0 0 64 64">
                <path d="m54.599,48.236l-10.545,-10.545c1.836,-2.973 2.946,-6.441 2.946,-10.191c0,-10.77 -8.73,-19.5 -19.5,-19.5s-19.5,8.73 -19.5,19.5s8.73,19.5 19.5,19.5c3.75,0 7.218,-1.11 10.188,-2.943l10.548,10.545c1.758,1.758 4.605,1.758 6.363,0s1.758,-4.608 0,-6.366zm-27.099,-7.236c-7.455,0 -13.5,-6.045 -13.5,-13.5s6.045,-13.5 13.5,-13.5s13.5,6.045 13.5,13.5s-6.045,13.5 -13.5,13.5z" />
            </svg>
          </button> -->
          <button ng-click="setShowHeader('color')" ng-class="{ active: show.header === 'color' }" class="group first">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <!-- <circle ng-attr-fill="{{ fillColorWithOffset(1) }}" stroke-width="3" r="9" cx="18.5" cy="45.5" /> -->
              <!-- <circle ng-attr-fill="{{ fillColorWithOffset(2) }}" stroke-width="3" r="9" cx="45.5" cy="45.5" /> -->
              <circle ng-attr-fill="{{ fillActiveColor() }}" stroke-width="4" r="22" cy="32" cx="32" />
            </svg>
          </button>
          <button ng-click="setShowHeader('shape')" ng-class="{ active: show.header === 'shape' }" class="group last">
              <svg xmlns="http://www.w3.org/2000/svg">
                <use ng-xlink-href="#{{$storage.rigid ? 'rigid' : 'flex'}}-{{$storage.fill ? 'fill' : 'nofill'}}" xlink:href="" />
              </svg>
          </button>
          <button ng-click="toggleForceCreateNewDrawing()" ng-class="{ active: shouldCreateNewDrawing() }">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <path d="M 32,10 L 32,54 M 10,32 L 54,32" />
            </svg>
          </button>
        </nav>
        <nav ng-show="show.header === 'color'" ng-controller="ColorCtrl">
          <button ng-repeat="color in $storage.colors track by $index" ng-click="setActiveColorIndex($index)" ng-class="{ active: activeColorIndex() === $index, first: $first, last: $last }" class="group">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <circle ng-attr-fill="{{ fillColor($index) }}" stroke-width="4" r="22" cy="32" cx="32" />
            </svg>
          </button>
        </nav>
        <nav ng-show="show.header === 'shape'" ng-controller="ShapeCtrl">
          <button ng-click="$storage.rigid = true; $storage.fill = false;" ng-class="{ active: $storage.rigid && !$storage.fill }" class="group first">
            <svg xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="#rigid-nofill" />
            </svg>
          </button>
          <button ng-click="$storage.rigid = false; $storage.fill = false;" ng-class="{ active: !$storage.rigid && !$storage.fill }" class="group">
            <svg xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="#flex-nofill">
            </svg>
          </button>
          <button ng-click="$storage.rigid = true; $storage.fill = true;" ng-class="{ active: $storage.rigid && $storage.fill }" class="group">
            <svg xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="#rigid-fill">
            </svg>
          </button>
          <button ng-click="$storage.rigid = false; $storage.fill = true;" ng-class="{ active: !$storage.rigid && $storage.fill }" class="group last">
            <svg xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="#flex-fill">
            </svg>
          </button>
        </nav>
      </div>
    </header>
    <main ng-controller="MapCtrl" ng-cloak>
      <div id="top-overlay">
	      <nav id="search" ng-controller="SearchCtrl" ng-class="{focus: focus}">
	        <input type="text" placeholder="Search" ng-model="query" ng-keydown="keydown($event)" ng-focus="focus = true" focus-on="focus">
					<button ng-click="query ? query = '' : focus = false">{{ query ? '&#x232B;' : '&#x00D7;' }}</button>
	        <div id="suggestions" class="group vertical" ng-mousemove="mousemove(); active = -1" ng-show="focus">
	          <div class="suggestion" ng-repeat="suggestion in suggestions" ng-bind-html="suggestion.description" ng-class="{ 'error': suggestion.error, 'active': $index === active, 'empty': !query, first: $first, last: $last }" ng-click="loadOnMap(suggestion.reference)">
	          </div>
	        </div>
	      </nav>
				
        <div id="status" ng-controller="StatusCtrl">
					<svg id="spotlight" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 64 64" enable-background="new 0 0 64 64">
	          <path d="m54.599,48.236l-10.545,-10.545c1.836,-2.973 2.946,-6.441 2.946,-10.191c0,-10.77 -8.73,-19.5 -19.5,-19.5s-19.5,8.73 -19.5,19.5s8.73,19.5 19.5,19.5c3.75,0 7.218,-1.11 10.188,-2.943l10.548,10.545c1.758,1.758 4.605,1.758 6.363,0s1.758,-4.608 0,-6.366zm-27.099,-7.236c-7.455,0 -13.5,-6.045 -13.5,-13.5s6.045,-13.5 13.5,-13.5s13.5,6.045 13.5,13.5s-6.045,13.5 -13.5,13.5z" />
	        </svg>
					<span ng-bind="locality()"></span>
				</div>
        <status-bar></status-bar>
        <!-- <progress max="1"></progress> -->
      </div>
      
      <div id="map_canvas"></div>
      <div ng-controller="DrawingCtrl">
        <div ng-repeat="drawing in drawings track by $index"
          ui-map-polygon="drawing._poly"
          ui-event="{'map-click': 'poly.click($params)'}">
          <div ng-repeat="node in drawing.nodes track by $index"
            ui-map-marker="node._marker"
            ui-event="{'map-click': 'marker.click($params)',
              'map-dragend': 'marker.dragend($params, $parent.$index, $index)'}"></div>
        </div>
      </div>
      <!-- <div id="map_canvas"
      ui-map="map"
      ui-options="options"
      ui-event="{'map-click': 'map_click($params)', 'map-center_changed': 'map_center_changed()', 'map-zoom_changed': 'map_zoom_changed()', 'map-idle': 'map_idle()', 'map-maptypeid_changed': 'map_maptypeid_changed()'}"></div> -->
    </main>
    <footer no-scroll ng-cloak>
      <div ui-view="footer" class="slide" ng-class="{left: top && bottom, right: !top && !bottom}">
        <nav id="map-types" ng-controller="MapActionCtrl" ng-show="show.footer === 'mapTypes'">
          <button class="group first" ng-click="setMapTypeId('custom')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <path d="m 31.863047,9.0466683 c -1.8557,0.01676 -2.758389,1.7892397 -3.116583,3.3615407 -1.293216,3.974797 -2.586433,7.949594 -3.879649,11.924391 -4.815644,0.01814 -9.638851,-0.101542 -14.449712,0.0039 -2.5347644,0.332049 -3.3439605,4.047578 -1.1752076,5.402114 3.7468716,2.703 7.4937426,5.406 11.2406136,8.109 -1.454512,4.596015 -3.060239,9.153085 -4.418766,13.773831 -0.418825,2.478518 2.792674,4.351153 4.745257,2.770394 3.731324,-2.718535 7.462648,-5.437069 11.193972,-8.155604 3.818049,2.768835 7.61245,5.571967 11.445262,8.319391 2.085283,1.367023 5.079013,-0.77478 4.453173,-3.189999 -1.422485,-4.516731 -2.924783,-9.010222 -4.377972,-13.518013 3.887493,-2.846449 7.861414,-5.586666 11.694128,-8.500459 1.856434,-1.758876 0.323852,-5.238895 -2.225894,-5.061145 -4.617513,0.01553 -9.235027,0.03107 -13.85254,0.0466 C 37.614078,19.759157 36.22098,15.133973 34.61219,10.593356 34.081401,9.6118431 32.977456,8.9911623 31.863047,9.0466683 z" />
            </svg>
          </button>
          <button class="group" ng-click="setMapTypeId('ROADMAP')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <circle fill="transparent" stroke-width="6" cx="32" cy="32" r=21 />
              <path stroke-width="1" d="M32,11 a 21 21 0 0 0 0 42" />
            </svg>
          </button>
          <button class="group last" ng-click="setMapTypeId('HYBRID')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 20,29 12,12 12,-12" />
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 32,11 0,29" />
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 11,53 42,0" />
            </svg>
          </button>
        </nav>
        <nav>
          <!-- <button class="accent">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <rect x="8" y="12" width="48" height="6" ry="3" />
              <rect x="8" y="29" width="48" height="6" ry="3" />
              <rect x="8" y="46" width="48" height="6" ry="3" />
            </svg>
          </button>
          <hr> -->
          <!-- <button ng-click="setShowHeader('action')" ng-class="{ active: show.header === 'action' }" class="group last">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <circle r="4.5" cy="32" cx="12.5" />
              <circle r="4.5" cy="32" cx="32" />
              <circle r="4.5" cy="32" cx="51.5" />
            </svg>
          </button> -->
          <button ng-controller="ActionCtrl" ng-click="clear()" class="trigger">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <path d="M10,10 L54,54 M10,54 L54,10" />
            </svg>
          </button>
          <button ng-controller="ActionCtrl" ng-click="undo()" class="trigger">
            Undo
          </button>
          <button ng-controller="ActionCtrl" ng-click="redo()" class="trigger">
            Redo
          </button>
          
          <button ng-click="setShowFooter('mapTypes')">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <circle fill="transparent" stroke-width="6" cx="32" cy="32" r=21 />
              <path stroke-width="1" d="M32,11 a 21 21 0 0 0 0 42" />
            </svg>
          </button>
          <!-- <button></button> -->
          <button ng-controller="ImageCtrl" ng-click="downloadPdf()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 20,29 12,12 12,-12" />
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 32,11 0,29" />
              <path style="fill:none;stroke-width:6;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m 11,53 42,0" />
            </svg>
          </button>
        </nav>
        <!-- <nav ng-show="show.header === 'action'" ng-controller="ActionCtrl">
          <button ng-click="clear()" class="group trigger first">
            X
          </button>
          <button ng-click="undo()" class="group trigger">
            &#x2190;
          </button>
          <button ng-click="redo()" class="group trigger last">
            &#x2192;
          </button>
        </nav> -->
      </div>
    </footer>

    <!-- inject:css -->
    <!-- endinject -->
    <script defer src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
    <script defer src="app/bower_components/traceur-runtime/traceur-runtime.min.js"></script>  
    
    <script src="//maps.googleapis.com/maps/api/js?libraries=geometry,places&sensor=false"></script>
    
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0/angular.js"></script>
        
    <!-- inject:js -->
    <!-- endinject -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
     <!--script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-49860512-1');
       ga('send', 'pageview');
    </script-->
</body>
</html>
